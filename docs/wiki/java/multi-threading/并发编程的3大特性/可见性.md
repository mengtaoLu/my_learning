---
side_position: 2
---

## 定义

一个线程对共享变量作了修改，后续其他线程访问后，能够读到最新的
值，就说该线程对该共享变量的更新，对其他线程是可见的。

## 造成可见性问题的原因

### 硬件层面的CPU缓存（核心原因）

程序中的变量可能被分配到寄存器而不是主存中，线程之间
不能读取对方寄存器内容。

### 指令重排

JIT编译器未得到足够的提示，对执行的指令重排，可能会导致
无法获取到变量或者是变量的写操作滞后于读操作。

### Java内存模型

- 主内存：所有变量都存储在主内存中；
- 工作内存：每个线程有独立且私有的工作内存，保存线程中需要用到的变量副本

变量的传递需要通过主内存进行，不同线程之间无法访问对方的
工作线程。

